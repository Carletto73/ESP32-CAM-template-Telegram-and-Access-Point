# ESP32-CAM-template-Telegram-and-Access-Point
Template for projects with ESP32-CAM with Telegram interface and Access Point for Credentials changes

Sketch that periodically connects to the local network, checks Telegram messages and returns to sleep mode. The sketch is performed for a single cycle and then the ESP32 returns to sleep mode, this makes it possible to create battery-powered systems with a very long autonomy. With the variable "minutes_of_sleep" it is possible to set every how many minutes the sketch is executed (from 1 to 255). By setting the variable to 0 the sketch will be executed every 15 seconds. The sketch always starts at 0 second (time detected by the network) when "minutes_of_sleep" is set from 1 to 255 (otherwise at seconds 0, 15, 30 or 45 if "minutes_of_sleep" is set to 0). With the "keep_awake" flag it is possible not to make the sketch terminate after a cycle. In this case it remains functional and goes into sleep mode for only 5 seconds every 5 minutes. The system remains on for 7 seconds on average and then goes into sleep mode for the time programmed in "minutes_of_sleep". The sketch is intended for an always powered system. To change the network credentials, it is necessary to press the reset button three times (or perform three power cycles) within 3 seconds of each other. This activates an access point with the name "ESP32cam" to which you have to access and with the browser you need to go to the page "192.168.4.1" where you can set the credentials for the network and Telegram Token and Chat_ID. Once the credentials are done. are saved and after 10 seconds the access point    is closed and the system restarts connecting to the selected network.

This sketch can be used as a starting point for your projects. This sketch sends a photo on the Telegram channel if the text "/ photo" is sent, otherwise it sends a message with instructions for any other message. By adding instructions to the "handleNewMessages" routine, you can add customized functions.
